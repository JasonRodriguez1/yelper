<div class="row">
  <div class="large-12 columns headline">
    <% if user_signed_in? %>
      <div id="before-review">
        <h1> Nice work! Here is my restaurant show page.</h1>
      </div>
      <div id="after-review">
        <h1> Congrats! You have been walked through my app. I hope you had as much fun exploring this app as I have creating it. I hope you will consider hiring me so I can keep building stuff because I love to do it and I am learning so much more every day!</h1>
        <h4>I can be reached either via email <a href="mailto:jason@jasonrodriguez.net?Subject=Portfolio%20feedback" target="_top">
here</a> or my cell 503-875-6574.</h4>
      </div>
      <div class="instruction">
      <div class="large-6 columns">
        <h4>In the left column, you will find restaurant details. Let's go to the next instruction box below to investigate further.. &#8619;</h4>
        </div>
        <div class="large-6 columns">
          <div id="before-review">
            <h4>In the right column, you will find the restaurant's rating and reviews!  &#8620;</h4>
          </div>
          <div>
            <h4 id="before-review">Once you have writen a review, click <a href="#">Here</a> to wrap up the tour!</h4>
          </div>
          <div id="after-review">
            <h4>In the right column, you can see your new review is displayed at the top of the list! I did this using the .order method and "created_at" with the DESC attribute &#8620;</h4>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<div class="medium-8 large-8 columns listing-show">
  <p id="notice"><%= notice %></p>
  <%= image_tag @restaurant.image_url %>
  <h2>
    <%= @restaurant.name %>
  </h2>
  <div class="star-rating" data-score= <%= @avg_rating %> ></div>
  <p><%= "#{@reviews.length} reviews" %></p>
  <div class="instruction">
    <h4>&#65514; Directly above, you will see a count of how many reviews were written and the overall averaged star rating for the restaurant.</h4>
    <h4> This was accomplished by using the .length method on @reviews and the .round method in the restaurant controller. &#65514;</h4>
</div>
  <p>
    <strong>Address:</strong>
    <%= @restaurant.address %>
  </p>

  <p>
    <strong>Phone:</strong>
    <%= @restaurant.phone %>
  </p>

  <p>
    <strong>Website:</strong>
    <%= link_to @restaurant.website, @restaurant.website %>
  </p>
  <div class="instruction">
    <h4>&#65516; Now, it's your turn! Click the "Write a Review" button below and Let the world know what your favorite or most disliked item at this type of restaurant is. Then rate accordingly. &#65516;</h4>
  </div>
<%= link_to 'Edit', edit_restaurant_path(@restaurant) %>
<%= link_to 'Back', restaurants_path %>
<%= link_to 'Write a Review', new_restaurant_review_path(@restaurant) %>
</div>
<div class="medium-4 large-4 columns">
  <% if @reviews.blank? %>
    <h3>No reviews yet. Be the first to write one!</h3>
  <% else %>
  <br>
    <table class="table">
      <thead>
        <tr>
        <ht class="medium-3 columns"></ht>
        <ht class="medium-9 columns"></ht>
      </thead>
      <tbody>
        <% @reviews.each do |review| %>
          <tr>
            <td>
              <h4>
                <%= "#{review.user.first_name.capitalize} #{review.user.last_name.capitalize[0]}." %>
              </h4>
              <p><%= review.created_at.strftime("%-m/%-d/%-y") %></p>
            </td>
            <td>
              <div class="star-rating" data-score= <%= review.rating %> ></div>
              <p><%= h(review.comment).gsub(/\n/, '<br/>').html_safe %></p>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% end %>
</div>
</div>
<script>
    $('.star-rating').raty({
      path: 'https://s3-us-west-2.amazonaws.com/yelper/stars',
      readOnly: true,
      score: function() {
            return $(this).attr('data-score');
    }
  });
</script>
